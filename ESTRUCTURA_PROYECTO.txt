â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   JM N8N CLASIFICADOS - ESTRUCTURA COMPLETA                  â•‘
â•‘                         Proyecto Spring Boot + Maven                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

jm_n8n_jar_clasificado/
â”‚
â”œâ”€â”€ pom.xml                                    [Maven] ConfiguraciÃ³n con todas las dependencias
â”œâ”€â”€ .gitignore                                 [Git] Archivos a ignorar
â”‚
â”œâ”€â”€ README.md                                  [Doc] DocumentaciÃ³n completa del proyecto
â”œâ”€â”€ PROYECTO_RESUMEN.md                        [Doc] Resumen tÃ©cnico y decisiones
â”œâ”€â”€ GUIA_RAPIDA.md                             [Doc] GuÃ­a de uso rÃ¡pido y troubleshooting
â”œâ”€â”€ HELP.md                                    [Doc] Generado por Spring Initializr
â”œâ”€â”€ ESTRUCTURA_PROYECTO.txt                    [Doc] Este archivo
â”‚
â”œâ”€â”€ build.bat                                  [Script] Compilar proyecto en Windows
â”œâ”€â”€ run.bat                                    [Script] Ejecutar JAR en Windows
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/pe/jm_n8n_jar_clasificado/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ JmN8nJarClasificadoApplication.java    [Main] Clase principal con @EnableScheduling
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppProperties.java                  [Config] Propiedades de configuraciÃ³n
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RestTemplateConfig.java             [Config] Bean RestTemplate con timeouts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileInfo.java                       [Model] File + LocalDateTime
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ scheduler/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ImageProcessorScheduler.java        [Scheduler] Job programado (cron cada minuto)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ service/
â”‚   â”‚   â”‚       â”œâ”€â”€ FileScannerService.java             [Service] Buscar y seleccionar archivo mÃ¡s antiguo
â”‚   â”‚   â”‚       â”œâ”€â”€ N8nUploadService.java               [Service] Upload multipart a N8N
â”‚   â”‚   â”‚       â””â”€â”€ FilePostProcessService.java         [Service] Delete/Move post-procesamiento
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml                         [Config] ConfiguraciÃ³n por defecto
â”‚   â”‚       â””â”€â”€ application-dev.yml                     [Config] Perfil de desarrollo
â”‚   â”‚
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/com/pe/jm_n8n_jar_clasificado/
â”‚           â””â”€â”€ JmN8nJarClasificadoApplicationTests.java [Test] Test bÃ¡sico de contexto
â”‚
â””â”€â”€ target/                                     [Build] Generado por Maven (gitignored)
    â””â”€â”€ jm_n8n_jar_clasificado-0.0.1-SNAPSHOT.jar       [JAR] Ejecutable

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN DE ARCHIVOS CREADOS:

ğŸ“¦ CONFIGURACIÃ“N MAVEN
   âœ“ pom.xml                                    Spring Boot 4.0.0, Java 21, Vert.x 4.5.1

ğŸ“ DOCUMENTACIÃ“N
   âœ“ README.md                                  DocumentaciÃ³n completa (340+ lÃ­neas)
   âœ“ PROYECTO_RESUMEN.md                        Resumen tÃ©cnico (240+ lÃ­neas)
   âœ“ GUIA_RAPIDA.md                             GuÃ­a de uso (330+ lÃ­neas)
   âœ“ ESTRUCTURA_PROYECTO.txt                    Este archivo

â˜• CÃ“DIGO JAVA (8 clases)
   âœ“ JmN8nJarClasificadoApplication.java        Clase principal
   âœ“ AppProperties.java                         ConfiguraciÃ³n
   âœ“ RestTemplateConfig.java                    Bean HTTP Client
   âœ“ FileInfo.java                              Modelo de datos
   âœ“ FileScannerService.java                    Escaneo de archivos
   âœ“ N8nUploadService.java                      Upload multipart
   âœ“ FilePostProcessService.java                Post-procesamiento
   âœ“ ImageProcessorScheduler.java               Scheduler (cron)

âš™ï¸ CONFIGURACIÃ“N
   âœ“ application.yml                            Config producciÃ³n
   âœ“ application-dev.yml                        Config desarrollo
   âœ“ .gitignore                                 Git ignore rules

ğŸ”§ SCRIPTS WINDOWS
   âœ“ build.bat                                  Compilar proyecto
   âœ“ run.bat                                    Ejecutar JAR

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEPENDENCIAS MAVEN (del pom.xml):

Spring Boot Starters:
  â€¢ spring-boot-starter
  â€¢ spring-boot-starter-web
  â€¢ spring-boot-starter-validation
  â€¢ spring-boot-starter-test (scope: test)

Vert.x (versiÃ³n 4.5.1):
  â€¢ vertx-core
  â€¢ vertx-mysql-client
  â€¢ vertx-sql-client

Utilidades:
  â€¢ lombok (optional)
  â€¢ jackson-databind
  â€¢ jackson-datatype-jsr310

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CARACTERÃSTICAS IMPLEMENTADAS:

âœ“ Scheduler cada 1 minuto (@Scheduled)
âœ“ ValidaciÃ³n de patrÃ³n YYYYMMDD_HHMMSS.jpg
âœ“ SelecciÃ³n del archivo mÃ¡s antiguo (por timestamp del nombre)
âœ“ Filtro de archivos incompletos (tamaÃ±o 0 y edad mÃ­nima)
âœ“ Upload multipart/form-data con RestTemplate
âœ“ ConfiguraciÃ³n de timeouts HTTP
âœ“ Post-procesamiento: DELETE o MOVE
âœ“ Manejo de errores con carpeta error/
âœ“ Control de concurrencia (AtomicBoolean)
âœ“ Logs detallados en cada paso
âœ“ ConfiguraciÃ³n flexible por application.yml
âœ“ CreaciÃ³n automÃ¡tica de carpetas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COMANDOS RÃPIDOS:

Compilar:
  mvn clean package
  o ejecutar: build.bat

Ejecutar:
  java -jar target\jm_n8n_jar_clasificado-0.0.1-SNAPSHOT.jar
  o ejecutar: run.bat

Ejecutar con perfil dev:
  java -jar target\jm_n8n_jar_clasificado-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev

Cambiar configuraciÃ³n sin recompilar:
  java -jar target\jm_n8n_jar_clasificado-0.0.1-SNAPSHOT.jar ^
    --app.input-folder=D:\MiCarpeta ^
    --app.success-action=DELETE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONFIGURACIÃ“N REQUERIDA (application.yml):

OBLIGATORIO:
  app.input-folder           Carpeta donde estÃ¡n los archivos JPG
  app.n8n-url               URL del webhook de N8N
  app.success-action        DELETE o MOVE

CONDICIONAL:
  app.processed-folder      Requerido si success-action=MOVE

OPCIONAL:
  app.error-folder          Carpeta para archivos con error
  app.min-file-age-seconds  Edad mÃ­nima (default: 5)
  app.timeout-seconds       Timeout HTTP (default: 30)
  app.max-retries           Reintentos (default: 3, no usado aÃºn)
  app.multipart-field-name  Nombre campo (default: clasificadoImgN8n)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FLUJO DE EJECUCIÃ“N:

CADA MINUTO:
  1. Scheduler se activa (cron: 0 * * * * *)
  2. Verifica lock de concurrencia
  3. FileScannerService busca archivos *.jpg vÃ¡lidos
  4. Filtra por patrÃ³n YYYYMMDD_HHMMSS.jpg
  5. Filtra tamaÃ±o > 0 y edad > minFileAgeSeconds
  6. Selecciona el mÃ¡s antiguo por timestamp
  7. N8nUploadService envÃ­a archivo como multipart
  8. Si HTTP 200/201: success-action (DELETE o MOVE)
  9. Si error: mueve a error-folder (si existe)
  10. Libera lock de concurrencia

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRÃ“XIMOS PASOS PARA EL USUARIO:

1. Revisar y ajustar src\main\resources\application.yml
2. Compilar el proyecto: mvn clean package
3. Ejecutar: java -jar target\jm_n8n_jar_clasificado-0.0.1-SNAPSHOT.jar
4. Monitorear logs para verificar funcionamiento
5. Colocar archivos JPG con formato YYYYMMDD_HHMMSS.jpg en input-folder
6. Verificar procesamiento cada minuto

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NOTAS TÃ‰CNICAS:

â€¢ Java 21 requerido
â€¢ Maven 3.6+ recomendado
â€¢ RestTemplate elegido por simplicidad y soporte nativo de multipart
â€¢ AtomicBoolean para control de concurrencia simple
â€¢ PatrÃ³n Service Layer para separaciÃ³n de responsabilidades
â€¢ @ConfigurationProperties para configuraciÃ³n type-safe
â€¢ Lombok para reducir boilerplate

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SOPORTE:

Para mÃ¡s informaciÃ³n, consultar:
  â€¢ README.md              - DocumentaciÃ³n completa
  â€¢ PROYECTO_RESUMEN.md    - Decisiones tÃ©cnicas y arquitectura
  â€¢ GUIA_RAPIDA.md         - Casos de uso y troubleshooting

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Proyecto generado: 2025-01-09
Spring Boot: 4.0.0
Java: 21
Vert.x: 4.5.1
